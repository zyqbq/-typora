# 移动端事件

Touch触摸事件
Pointer指针事件

### 移动端事件的发展

没有移动端事件，大部分鼠标事件在移动端一样有用

苹果推出**Touch触摸事件**

微软推出**Pointer指针事件**(统一鼠标、触摸、笔)

### 1.Touch 事件的类型

touchstart 点

touchmove 移动

touchend 抬起

touchcancel 打断取消



### 2.注意事项

2.1.Touch 事件在 PC 端不会触发，**鼠标事件**在 PC 端和移动端**都会触发**

2.2.即使触摸点**移出目标元素**，touchmove 事件依然会持续触发，mousemove 事件不会再触发

3.Touch 事件的特征检测（判断浏览器支不支持 Touch 事件）

   window.onload

   window.**addEventListener**('load')

   console.**log**('onload' in window);



   console.**log**('ontouchstart' in window);

# touch事件的event对象

### 1.event 对象的常用属性

type 事件类型

target 目标元素

#### touches 屏幕上的所有触摸点,支持多点触摸

evt.targetTouches 目标元素的触摸点

evt.changedTouches 目标元素的触摸点变化的点

evt.targetTouches 起始于目标上的所有触摸点

evt.**changedTouches** 事件触发时，状态发生了改变的所有触摸点

### 2.触摸点的常用属性

  identifier 触摸点id（唯一标识符）,一般多指触摸有用

  target 目标元素

### **可视区域位置**

>   screenX/screenY 触点相对于屏幕左边缘的X、Y坐标
>
>   clientX/clientY 触点相对于可视区域左边缘的X、Y坐标。**不包括**任何滚动偏移
>
>   pageX/pageY 触点相对于 HTML 文档左边缘的X、Y坐标。**包括滚动偏移**

### 3.阻止浏览器的默认行为evt.**preventDefault**()

  阻止 scrolling(滚动）, pinch/zoom（缩放）, 鼠标事件等默认行为



3.1.可以在 touch 的事件处理函数中使用 evt.**preventDefault**() 阻止浏览器的默认行为



#### 3.2.touch-action 告诉浏览器哪些触摸操作让浏览器处理，阻止其他触摸操作的默认行为

  https://developer.mozilla.org/zh-CN/docs/Web/CSS/touch-action

```css
处理所有触摸操作
      /* touch-action: auto; */
去除所有默认行为
      /* touch-action: none; */

      /* 平移 */
      /* touch-action: pan-x; */x是水平方向的滚动条，垂直方向是不允许的
      /* touch-action: pan-y; */

 只允许进行滚动和持续缩放操作，不允许双击缩放
      /* touch-action: manipulation; */
```

# Pointer指针事件

### 1.Pointer 事件的类型

 pointerover：/pointerenter/pointerout/pointerleave/pointerdown/pointermove/pointerup/pointercancel



### 2.注意事项

2.1.Pointer 事件直接继承了**鼠标事件**，在此基础上又添加了其他一些内容，处理 Pointer 事件和处理**鼠标事件**几乎一致



2.2.Pointer 事件在 **PC 端和移动端都会触发**



2.3.触摸点**移出目标元素**，**touchmove** 事件依然会**持续触发**，pointermove 和 mousemove 事件不会再触发



3.Pointer 事件的特征检测（判断浏览器支不支持 Pointer 事件）



## Pointer事件的event对象

### 1.event 对象的常用属性(evt直接继承，不通过touch触摸点)

   evt.pointerId 指针id（唯一标识符）

   evt.type 事件类型

   evt.pointerType 指针类型（鼠标/笔/触摸等）

   evt.target 目标元素

   evt.screenX/screenY 指针相对于屏幕左边缘的X、Y坐标

   evt.clientX/clientY 指针相对于可视区域左边缘的X、Y坐标。不包括任何滚动偏移

   evt.x/y clientX/clientY 的别名

   evt.pageX/pageY 指针相对于 HTML 文档左边缘的X、Y坐标。包括滚动偏移

### 2.阻止浏览器的默认行为

   阻止 scrolling, pinch/zoom, 鼠标事件等默认行为

   2.1.Pointer 的事件处理函数中，evt.**preventDefault**() 阻止的是 PC 端的默认行为（不能阻止  scrolling, pinch/zoom, 鼠标事件等默认行为，可以**阻止图片拖动**的默认行为）

   2.2.1.可以在 touch 的事件处理函数中使用evt.**preventDefault**() 阻止移动端的默认行为

   2.2.2.touch-action 设置触摸操作时浏览器的默认行为

## pointer事件和touch事件的区别

pointer事件点击事件和move事件是平行的，点击之后松开，再在元素上滑动也会带动move（即使不点击）

所以pointer的move等事件应该绑定在pointerdown触发后的函数里面

pointer事件移动到元素外面会导致事件停止触发，所以不能将move事件，pointerup，pointercancel绑定在目标元素上，应该绑定在document上

# 滑动手势

touch自带的手势只兼容ios

2.手势库 Hammer.js

   https://hammerjs.github.io/



